import{k as a,ab as X,bF as Y,l as t,aw as H,a4 as i,Y as S,ao as C,X as m,aN as K,bG as Z,bH as x,Z as _,bI as q,aa as z}from"./index-2048bd11.js";import{L as J,T as Q,C as tt,X as et,Y as st,b as at}from"./LineChart-8e8d5d32.js";function u(n){const{children:o,value:c,index:l,...y}=n;return t.jsx("div",{role:"tabpanel",hidden:c!==l,id:`simple-tabpanel-${l}`,"aria-labelledby":`simple-tab-${l}`,style:{height:"100%"},...y,children:c===l&&t.jsx(i,{sx:{p:3},children:t.jsx(S,{children:o})})})}function p(n){return{id:`simple-tab-${n}`,"aria-controls":`simple-tabpanel-${n}`,disableFocusRipple:!0}}const h=({data:n,name:o})=>t.jsxs(J,{height:500,width:900,data:n,margin:{top:5,right:30,left:20,bottom:5},children:[t.jsx(Q,{}),t.jsx(tt,{strokeDasharray:"3 3"}),t.jsx(et,{dataKey:"name"}),t.jsx(st,{label:{value:o,angle:-90,position:"left"}}),t.jsx(at,{type:"monotone",dataKey:"value",stroke:"#8884d8",activeDot:{r:8}})]});function rt(){const[n,o]=a.useState(0),[c,l]=a.useState(0),[y,v]=a.useState(0),[D,I]=a.useState(0),[w,T]=a.useState(0),[b,nt]=a.useState(!1),[A,G]=a.useState([]),[L,$]=a.useState([]),[k,P]=a.useState([]),[U,N]=a.useState([]),{appId:B}=X(),[f,M]=a.useState(()=>{const e=new Date;return e.setDate(1),e.setHours(0,0,0,0),e.toISOString()}),[g,R]=a.useState(()=>new Date().toISOString()),E=new URL(Y.API_URL).origin,j=async()=>{try{const{data:s}=await q(B,f,g);I(s.transactionsCount),l(s.apiCallCount),T(s.issuanceCount),v(s.sessionsCount),G(e(s.sessions)),P(e(s.transactions)),N(e(s.issuance)),$(e(s.apiCalls))}catch{}function e(s){const d=[];for(const[r,W]of s.y.entries())d.push({value:W,name:m(new Date(s.x[r]),"yyyy-MM-dd")});return d}};a.useEffect(()=>{j()},[]);const F=(e,s)=>{o(s)},O=async()=>{await j()},V=async()=>{const s="data:text/csv,"+(await z()({url:`${E}/analysis/apis-csv?startDate=${f}&endDate=${g}`})).data,d="api.csv",r=document.createElement("a");r.href=s,r.download=d,r.click()};return t.jsxs(H,{maxWidth:"xl",style:{height:"calc(100vh - 68px)",paddingTop:"20px"},children:[t.jsx(i,{style:{paddingBottom:"20px"},children:t.jsx(S,{variant:"h4",children:"Statistics"})}),t.jsxs(i,{style:{display:"flex",marginBottom:"20px"},children:[t.jsx(C,{id:"date",label:"From",type:"date",defaultValue:m(new Date(f),"yyyy-MM-dd"),sx:{width:220},InputLabelProps:{shrink:!0},onChange:e=>{console.log(e.target.value),M(new Date(e.target.value).toISOString())},style:{paddingRight:"15px"}}),t.jsx(C,{id:"date",label:"To",type:"date",defaultValue:m(new Date(g),"yyyy-MM-dd"),sx:{width:220},InputLabelProps:{shrink:!0},onChange:e=>R(new Date(e.target.value).toISOString()),style:{paddingRight:"15px"}}),t.jsx(K,{loading:b,variant:"outlined",disabled:b,onClick:O,children:"Filter Stats"})]}),t.jsxs(i,{sx:{width:"100%",height:"100%"},className:"tabs-start",children:[t.jsx(i,{children:t.jsxs(Z,{value:n,onChange:F,"aria-label":"basic tabs example",variant:"fullWidth",centered:!1,children:[t.jsx(x,{label:`Sessions - ${y}`,...p(0),style:{textAlign:"left",textTransform:"none",alignItems:"flex-start"}}),t.jsx(x,{label:`API calls - ${c}`,...p(1),className:"statistic-tab",style:{textAlign:"left",textTransform:"none",alignItems:"flex-start"}}),t.jsx(x,{label:`Issuence - ${w}`,...p(2),style:{textAlign:"left",textTransform:"none",alignItems:"flex-start"}}),t.jsx(x,{label:`Blockchain Transactions - ${D}`,...p(3),style:{textAlign:"left",textTransform:"none",alignItems:"flex-start"}})]})}),t.jsx(u,{value:n,index:0,children:t.jsx(i,{className:"tabpanel-box",style:{display:"flex",justifyContent:"center"},children:t.jsx(h,{data:A,name:"Sessions"})})}),t.jsxs(u,{value:n,index:1,children:[t.jsx(i,{className:"tabpanel-box",style:{display:"flex",justifyContent:"center"},children:t.jsx(h,{data:L,name:"APIs"})}),t.jsx(_,{onClick:V,children:"Upload CSV"})]}),t.jsx(u,{value:n,index:2,children:t.jsx(i,{className:"tabpanel-box",style:{display:"flex",justifyContent:"center"},children:t.jsx(h,{data:U,name:"Issuance"})})}),t.jsx(u,{value:n,index:3,children:t.jsx(i,{className:"tabpanel-box",style:{display:"flex",justifyContent:"center"},children:t.jsx(h,{data:k,name:"Transaction"})})})]})]})}export{rt as default};
