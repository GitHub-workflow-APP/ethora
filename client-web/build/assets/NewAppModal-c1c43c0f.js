import{R as B,a6 as l,k as g,aj as R,aJ as D,l as e,am as F,a4 as d,U,ac as T,aH as P,ao as E,aN as G,cb as I}from"./index-2048bd11.js";function q({open:S,setOpen:i}){const c=B.useRef(null),A=l(a=>a.setApp),j=l(a=>a.setUser),N=l(a=>a.user),[p,u]=g.useState(!1),[L,b]=g.useState(""),{showSnackbar:w}=R(),t=D({initialValues:{appName:"",appDescription:"",appGoogleId:"",defaultAccessProfileOpen:!0,defaultAccessAssetsOpen:!0,usersCanFree:!0,newUserTokenGift:0,coinsDayliBonus:0,appUrl:""},validate:a=>{const r={};return a.appName||(r.appName="Required"),r},onSubmit:({appName:a,appDescription:r,appGoogleId:f,defaultAccessAssetsOpen:k,defaultAccessProfileOpen:v,usersCanFree:y,appUrl:m})=>{u(!0);const s=new FormData;let o;if(c.current){const n=c.current.files;n&&(o=n[0])}o&&s.append("file",o),s.append("displayName",a),r&&s.append("appDescription",r.toString()),f&&s.append("appGoogleId",f.toString()),s.append("defaultAccessAssetsOpen",k.toString()),s.append("defaultAccessProfileOpen",v.toString()),s.append("usersCanFree",y.toString()),m&&s.append("appUrl",m.toString()),I(s).then(n=>{A(n.data.app),i(!1),j({...N,homeScreen:""})}).catch(n=>{var h,x;w("error","Cannot create the app "+(((x=(h=n.response)==null?void 0:h.data)==null?void 0:x.error)||""))}).finally(()=>u(!1))}}),C=()=>{i(!1),b("")};return e.jsx(F,{onClose:C,open:S,children:e.jsxs(d,{sx:{padding:1},children:[e.jsx(U,{sx:{position:"absolute",top:0,right:0},disabled:p,onClick:()=>i(!1),children:e.jsx(T,{})}),e.jsx(P,{sx:{padding:1},children:"New App"}),e.jsx(d,{sx:{width:"100%",padding:1},children:e.jsxs("form",{onSubmit:t.handleSubmit,style:{width:"300px"},children:[e.jsx(d,{children:e.jsx(E,{fullWidth:!0,error:!!t.touched.appName&&!!t.errors.appName,margin:"dense",label:"App Name",name:"appName",variant:"outlined",onChange:t.handleChange,onBlur:t.handleBlur,value:t.values.appName})}),e.jsx(G,{loading:p,variant:"contained",style:{marginTop:"15px",width:"100%"},type:"submit",disabled:p,children:"Create App"})]})})]})})}export{q as default};
